 
# Copyright (c) 2019 Uber Technologies, Inc.
#
# <p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file
# except in compliance with the License. You may obtain a copy of the License at
# <p>http://www.apache.org/licenses/LICENSE-2.0
#
# <p>Unless required by applicable law or agreed to in writing, software distributed under the
# License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
# express or implied. See the License for the specific language governing permissions and
# limitations under the License.


[[scopes]]
name = "Method"
[[scopes.rules]]
matcher =  """
((method_declaration 
			name : (_) @n
            parameters : (formal_parameters
            		(formal_parameter type:(_) @t0)
                    (formal_parameter type:(_) @t1)
                    (formal_parameter type:(_) @t2)
                    (formal_parameter type:(_) @t3)
                    (formal_parameter type:(_) @t4))) @xd0)"""
generator = """
(((method_declaration 
			name : (_) @z
            parameters : (formal_parameters
            		(formal_parameter type:(_) @r0)
                    (formal_parameter type:(_) @r1)
                    (formal_parameter type:(_) @r2)
                    (formal_parameter type:(_) @r3)
                    (formal_parameter type:(_) @r4))) @qd)
(#eq? @z "@n")
(#eq? @r0 "@t0")
(#eq? @r1 "@t1")
(#eq? @r2 "@t2")
(#eq? @r3 "@t3")
(#eq? @r4 "@t4")                    
)"""
[[scopes.rules]]
matcher =  """
((method_declaration 
			name : (_) @n
            parameters : (formal_parameters
            		(formal_parameter type:(_) @t0)
                    (formal_parameter type:(_) @t1)
                    (formal_parameter type:(_) @t2)
                    (formal_parameter type:(_) @t3))) @xd5)"""
generator = """
(((method_declaration 
			name : (_) @z
            parameters : (formal_parameters
            		(formal_parameter type:(_) @r0)
                    (formal_parameter type:(_) @r1)
                    (formal_parameter type:(_) @r2)
                    (formal_parameter type:(_) @r3))) @qd)
(#eq? @z "@n")
(#eq? @r0 "@t0")
(#eq? @r1 "@t1")
(#eq? @r2 "@t2")
(#eq? @r3 "@t3")
)"""
[[scopes.rules]]
matcher =  """
((method_declaration 
			name : (_) @n
            parameters : (formal_parameters
            		(formal_parameter type:(_) @t0)
                    (formal_parameter type:(_) @t1)
                    (formal_parameter type:(_) @t2))) @xd2)"""
generator = """
(((method_declaration 
			name : (_) @z
            parameters : (formal_parameters
            		(formal_parameter type:(_) @r0)
                    (formal_parameter type:(_) @r1)
                    (formal_parameter type:(_) @r2))) @qd)
(#eq? @z "@n")
(#eq? @r0 "@t0")
(#eq? @r1 "@t1")
(#eq? @r2 "@t2")
)"""
[[scopes.rules]]
matcher =  """
((method_declaration 
			name : (_) @n
            parameters : (formal_parameters
            		(formal_parameter type:(_) @t0)
                    (formal_parameter type:(_) @t1))) @xd3)"""
generator = """
(((method_declaration 
			name : (_) @z
            parameters : (formal_parameters
            		(formal_parameter type:(_) @r0)
                    (formal_parameter type:(_) @r1))) @qd)
(#eq? @z "@n")
(#eq? @r0 "@t0")
(#eq? @r1 "@t1")
)"""
[[scopes.rules]]
matcher =  """
(
(((method_declaration 
			name : (_) @n
            parameters : 
            	((formal_parameters
            		(((formal_parameter type: (_) @t0) )? @f )) @zz)
                )
    @xd6)
)
(#not-match? @zz ",")
(#not-eq? @zz "()")
)"""
generator = """
(
(((method_declaration 
			name : (_) @z
            parameters : 
            	((formal_parameters
            		(((formal_parameter type: (_) @r1) ) @p )) @j)
                )
    @4)
)
(#not-match? @j ",")
(#not-eq? @j "()")
(#eq? @z "@n")
(#eq? @r1 "@t0")
)"""

# This is a bit flaky, since it will not support matching ( ) i.e. bracket with space 
[[scopes.rules]]
matcher =  """
(
(((method_declaration 
			name : (_) @n
            parameters : 
            	((formal_parameters) @gg)
                )
    @xd4)
)

(#not-match? @gg ",")
(#eq? @gg "()")
)"""
generator = """
(
(((method_declaration 
			name : (_) @z
            parameters : 
            	((formal_parameters) @j)
                )
    @xd1)
)

(#not-match? @j ",")
(#eq? @j "()")
(#eq? @z "@n")
)"""

[[scopes]]
name = "Class"
[[scopes.rules]]
matcher = "(class_declaration name:(_) @n) @c"
generator = """
(
((class_declaration name:(_) @z) @qc)
(#eq? @z "@n")
)
"""